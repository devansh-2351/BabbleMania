{"version":3,"sources":["hooks.js","components/Message.js","components/Channel.js","components/Loader.js","App.js","index.js"],"names":["useDarkMode","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","useLocalStorage","queries","values","defaultValue","mediaQueryLists","map","q","matchMedia","getValue","useCallback","index","findIndex","mql","matches","setValue","useEffect","handler","forEach","addListener","removeListener","useMedia","enabled","setEnabled","className","element","document","body","classList","add","remove","formatDate","date","formattedDate","formatRelative","Date","charAt","toUpperCase","slice","Message","createdAt","text","displayName","photoURL","src","alt","width","height","seconds","Channel","user","messagesRef","firebase","firestore","collection","messages","query","docs","setDocs","queryRef","useRef","curent","isEqual","current","onSnapshot","querySnapshot","data","doc","id","useFirestoreQuery","orderBy","limit","newMessage","setNewMessage","inputRef","bottomListRef","uid","focus","sort","first","second","message","ref","onSubmit","e","preventDefault","trimmedMessage","trim","FieldValue","serverTimestamp","scrollIntoView","behavior","type","onChange","target","placeholder","disabled","Loader","variant","size","loaderClass","classNames","initializeApp","apiKey","process","REACT_APP_API_KEY","authDomain","REACT_APP_AUTH_DOMAIN","projectId","REACT_APP_AUTH_PROJECT_ID","storageBucket","REACT_APP_STORAGE_BUCKET","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","REACT_APP_APP_ID","MoonIcon","props","xmlns","viewBox","fill","fillRule","d","clipRule","SunIcon","App","auth","initializing","setInitializing","currentUser","setUser","onAuthStateChanged","useAuthState","darkMode","setDarkMode","brandLogo","ThemeIcon","signInWithGoogle","a","provider","GoogleAuthProvider","useDeviceLanguage","signInWithPopup","signOut","style","href","onClick","prev","maxHeight","enableBackground","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5f9d9343.chunk.js","sourcesContent":["import { useEffect, useState, useRef, useCallback } from 'react';\r\n\r\nexport function useFirestoreQuery(query) {\r\n  const [docs, setDocs] = useState([]);\r\n\r\n  // Store current query in ref\r\n  const queryRef = useRef(query);\r\n\r\n  // Compare current query with the previous one\r\n  useEffect(() => {\r\n    // Use Firestore built-in 'isEqual' method\r\n    // to compare queries\r\n    if (!queryRef?.curent?.isEqual(query)) {\r\n      queryRef.current = query;\r\n    }\r\n  });\r\n\r\n  // Re-run data listener only if query has changed\r\n  useEffect(() => {\r\n    if (!queryRef.current) {\r\n      return null;\r\n    }\r\n\r\n    // Subscribe to query with onSnapshot\r\n    const unsubscribe = queryRef.current.onSnapshot(querySnapshot => {\r\n      // Get all documents from collection - with IDs\r\n      const data = querySnapshot.docs.map(doc => ({\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      }));\r\n      // Update state\r\n      setDocs(data);\r\n    });\r\n\r\n    // Detach listener\r\n    return unsubscribe;\r\n  }, [queryRef]);\r\n\r\n  return docs;\r\n}\r\n\r\nexport function useAuthState(auth) {\r\n  const [initializing, setInitializing] = useState(true);\r\n  const [user, setUser] = useState(() => auth.currentUser);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        setUser(user);\r\n      } else {\r\n        setUser(false);\r\n      }\r\n      if (initializing) {\r\n        setInitializing(false);\r\n      }\r\n    });\r\n\r\n    // Cleanup subscription\r\n    return unsubscribe;\r\n  }, [auth, initializing]);\r\n\r\n  return { user, initializing };\r\n}\r\n\r\nexport function useLocalStorage(key, initialValue) {\r\n  // State to store our value\r\n  // Pass initial state function to useState so logic is only executed once\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n      const item = window.localStorage.getItem(key);\r\n      // Parse stored json or if none return initialValue\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  // Return a wrapped version of useState's setter function that ...\r\n  // ... persists the new value to localStorage.\r\n  const setValue = value => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      // Save to local storage\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}\r\n\r\nexport function useMedia(queries, values, defaultValue) {\r\n  // Array containing a media query list for each query\r\n  const mediaQueryLists = queries.map(q => window.matchMedia(q));\r\n\r\n  // Function that gets value based on matching media query\r\n  const getValue = useCallback(() => {\r\n    // Get index of first media query that matches\r\n    const index = mediaQueryLists.findIndex(mql => mql.matches);\r\n    // Return related value or defaultValue if none\r\n    return typeof values[index] !== 'undefined' ? values[index] : defaultValue;\r\n  }, [mediaQueryLists, values, defaultValue]);\r\n\r\n  // State and setter for matched value\r\n  const [value, setValue] = useState(getValue);\r\n\r\n  useEffect(() => {\r\n    // Event listener callback\r\n    // Note: By defining getValue outside of useEffect we ensure that it has ...\r\n    // ... current values of hook args (as this hook callback is created once on mount).\r\n    const handler = () => setValue(getValue);\r\n    // Set a listener for each media query with above handler as callback.\r\n    mediaQueryLists.forEach(mql => mql.addListener(handler));\r\n    // Remove listeners on cleanup\r\n    return () => mediaQueryLists.forEach(mql => mql.removeListener(handler));\r\n  }, [getValue, mediaQueryLists]);\r\n\r\n  return value;\r\n}\r\n\r\nexport function useDarkMode() {\r\n  // See if user has set a browser or OS preference for dark mode.\r\n  const prefersDarkMode = useMedia(\r\n    ['(prefers-color-scheme: dark)'],\r\n    [true],\r\n    false\r\n  );\r\n\r\n  // Use our useLocalStorage hook to persist state through a page refresh\r\n  const [enabled, setEnabled] = useLocalStorage(\r\n    'dark-mode-enabled',\r\n    prefersDarkMode\r\n  );\r\n\r\n  // Fire off effect that add/removes dark mode class\r\n  useEffect(\r\n    () => {\r\n      const className = 'dark';\r\n      const element = window.document.body;\r\n      if (enabled) {\r\n        element.classList.add(className);\r\n      } else {\r\n        element.classList.remove(className);\r\n      }\r\n    },\r\n    [enabled] // Only re-call effect when value changes\r\n  );\r\n\r\n  // Return enabled state and setter\r\n  return [enabled, setEnabled];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { formatRelative } from 'date-fns';\r\n\r\nconst formatDate = date => {\r\n  let formattedDate = '';\r\n  if (date) {\r\n    // Convert the date in words relative to the current date\r\n    formattedDate = formatRelative(date, new Date());\r\n    // Uppercase the first letter\r\n    formattedDate =\r\n      formattedDate.charAt(0).toUpperCase() + formattedDate.slice(1);\r\n  }\r\n  return formattedDate;\r\n};\r\n\r\nconst Message = ({\r\n  createdAt = null,\r\n  text = '',\r\n  displayName = '',\r\n  photoURL = '',\r\n}) => {\r\n  if (!text) return null;\r\n\r\n  return (\r\n    <div className=\"px-4 py-4 rounded-md hover:bg-gray-50 dark:hover:bg-coolDark-600 overflow-hidden flex items-start\">\r\n      {photoURL ? (\r\n        <img\r\n          src={photoURL}\r\n          alt=\"Avatar\"\r\n          className=\"rounded-full mr-4\"\r\n          width={45}\r\n          height={45}\r\n        />\r\n      ) : null}\r\n      <div>\r\n        <div className=\"flex items-center mb-1\">\r\n          {displayName ? (\r\n            <p className=\"mr-2 text-primary-500\">{displayName}</p>\r\n          ) : null}\r\n          {createdAt?.seconds ? (\r\n            <span className=\"text-gray-500 text-xs\">\r\n              {formatDate(new Date(createdAt.seconds * 1000))}\r\n            </span>\r\n          ) : null}\r\n        </div>\r\n        <p>{text}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nMessage.propTypes = {\r\n  text: PropTypes.string,\r\n  createdAt: PropTypes.shape({\r\n    seconds: PropTypes.number,\r\n  }),\r\n  displayName: PropTypes.string,\r\n  photoURL: PropTypes.string,\r\n};\r\n\r\nexport default Message;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport firebase from 'firebase/app';\r\nimport { useFirestoreQuery } from '../hooks';\r\n// Components\r\nimport Message from './Message';\r\n\r\nconst Channel = ({ user = null }) => {\r\n  const db = firebase.firestore();\r\n  const messagesRef = db.collection('messages');\r\n  const messages = useFirestoreQuery(\r\n    messagesRef.orderBy('createdAt', 'desc').limit(100)\r\n  );\r\n\r\n  const [newMessage, setNewMessage] = useState('');\r\n\r\n  const inputRef = useRef();\r\n  const bottomListRef = useRef();\r\n\r\n  const { uid, displayName, photoURL } = user;\r\n\r\n  useEffect(() => {\r\n    if (inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [inputRef]);\r\n\r\n  const handleOnChange = e => {\r\n    setNewMessage(e.target.value);\r\n  };\r\n\r\n  const handleOnSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    const trimmedMessage = newMessage.trim();\r\n    if (trimmedMessage) {\r\n      // Add new message in Firestore\r\n      messagesRef.add({\r\n        text: trimmedMessage,\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        uid,\r\n        displayName,\r\n        photoURL,\r\n      });\r\n      // Clear input field\r\n      setNewMessage('');\r\n      // Scroll down to the bottom of the list\r\n      bottomListRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"overflow-auto h-full\">\r\n        <div className=\"py-4 max-w-screen-lg mx-auto\">\r\n          <div className=\"border-b dark:border-gray-600 border-gray-200 py-8 mb-4\">\r\n            <div className=\"font-bold text-3xl text-center\">\r\n              <p className=\"mb-1\">Welcome to</p>\r\n              <p className=\"mb-3\">React FireChat</p>\r\n            </div>\r\n            <p className=\"text-gray-400 text-center\">\r\n              This is the beginning of this chat.\r\n            </p>\r\n          </div>\r\n          <ul>\r\n            {messages\r\n              ?.sort((first, second) =>\r\n                first?.createdAt?.seconds <= second?.createdAt?.seconds ? -1 : 1\r\n              )\r\n              ?.map(message => (\r\n                <li key={message.id}>\r\n                  <Message {...message} />\r\n                </li>\r\n              ))}\r\n          </ul>\r\n          <div ref={bottomListRef} />\r\n        </div>\r\n      </div>\r\n      <div className=\"mb-6 mx-4\">\r\n        <form\r\n          onSubmit={handleOnSubmit}\r\n          className=\"flex flex-row bg-gray-200 dark:bg-coolDark-400 rounded-md px-4 py-3 z-10 max-w-screen-lg mx-auto dark:text-white shadow-md\"\r\n        >\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={handleOnChange}\r\n            placeholder=\"Type your message here...\"\r\n            className=\"flex-1 bg-transparent outline-none\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!newMessage}\r\n            className=\"uppercase font-semibold text-sm tracking-wider text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors\"\r\n          >\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nChannel.propTypes = {\r\n  user: PropTypes.shape({\r\n    uid: PropTypes.string,\r\n    displayName: PropTypes.string,\r\n    photoURL: PropTypes.string,\r\n  }),\r\n};\r\n\r\nexport default Channel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nconst Loader = ({variant = 'primary', size = 'default'}) => {\r\n  const loaderClass = classNames(\r\n    // Boder\r\n    ['rounded-full', 'border-gray-500', 'border-opacity-25'],\r\n    // Animation\r\n    'animate-spin',\r\n    // Variant\r\n    variant === 'white' ? 'border-t-white' : `border-t-${variant}-500`,\r\n    // Size\r\n    size === 'sm' && 'w-6 h-6 border-2',\r\n    size === 'default' && 'w-8 h-8 border-4',\r\n    size === 'lg' && 'w-12 h-12 border-4'\r\n  );\r\n\r\n  return <div className={loaderClass} />;\r\n};\r\n\r\nLoader.propTypes = {\r\n  variant: PropTypes.oneOf(['primary', 'secondary', 'white']),\r\n  size: PropTypes.oneOf(['sm', 'default', 'lg']),\r\n};\r\n\r\nexport default Loader;\r\n","import React from 'react';\r\n// Firebase deps\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n// Hooks\r\nimport { useAuthState, useDarkMode } from './hooks';\r\n// Components\r\nimport Channel from './components/Channel';\r\nimport Loader from './components/Loader';\r\n\r\nfirebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_AUTH_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n});\r\n\r\nconst MoonIcon = props => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 20 20\"\r\n    fill=\"currentColor\"\r\n    {...props}\r\n  >\r\n    <path\r\n      fillRule=\"evenodd\"\r\n      d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\"\r\n      clipRule=\"evenodd\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nconst SunIcon = props => (\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    viewBox=\"0 0 20 20\"\r\n    fill=\"currentColor\"\r\n    {...props}\r\n  >\r\n    <path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" />\r\n  </svg>\r\n);\r\n\r\nfunction App() {\r\n  const { user, initializing } = useAuthState(firebase.auth());\r\n  const [darkMode, setDarkMode] = useDarkMode();\r\n\r\n  const brandLogo = darkMode\r\n    ? `${process.env.PUBLIC_URL}/logo_white.svg`\r\n    : `${process.env.PUBLIC_URL}/logo.svg`;\r\n\r\n  const ThemeIcon = darkMode ? SunIcon : MoonIcon;\r\n\r\n  const signInWithGoogle = async () => {\r\n    // Retrieve Google provider object\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    // Set language to the default browser preference\r\n    firebase.auth().useDeviceLanguage();\r\n    // Start sign in process\r\n    try {\r\n      await firebase.auth().signInWithPopup(provider);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await firebase.auth().signOut();\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (initializing) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-full\">\r\n          <Loader size=\"lg\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (user) return <Channel user={user} />;\r\n\r\n    return (\r\n      <div className=\"flex items-center justify-center shadow-md h-full\">\r\n        <div className=\"flex flex-col items-center justify-center max-w-xl w-full mx-4 p-8 rounded-md shadow-card bg-white dark:bg-coolDark-600 transition-all\">\r\n          <h2 className=\"mb-2 text-3xl flex items-center\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n              className=\"flex-shrink-0 w-12 h-12 mr-1 text-primary-500\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            React FireChat\r\n          </h2>\r\n          <p className=\"mb-8 text-lg text-center\">\r\n            The easiest way to chat with people all around the world.\r\n          </p>\r\n          <button\r\n            onClick={signInWithGoogle}\r\n            className=\"rounded shadow-button pl-6 pr-8 py-3 bg-white hover:bg-gray-50 text-gray-600 font-medium flex items-center justify-center overflow-y-hidden focus:outline-none focus:ring focus:ring-primary-500 focus:ring-opacity-75\"\r\n          >\r\n            <svg\r\n              viewBox=\"5 -5 30 30\"\r\n              enableBackground=\"new 5 -5 30 30\"\r\n              className=\"w-6 h-6 mr-4 flex-shrink-0\"\r\n            >\r\n              <path\r\n                fill=\"#fff\"\r\n                d=\"M15.3-4.2C11.6-3 8.4-.2 6.6 3.2 6 4.5 5.6 5.7 5.3 7c-.7 3.3-.2 6.7 1.3 9.7 1 1.9 2.4 3.7 4.2 5 1.6 1.3 3.5 2.2 5.6 2.7 2.6.7 5.3.7 7.8.1 2.3-.5 4.5-1.6 6.3-3.2 1.9-1.7 3.2-3.9 3.9-6.2.8-2.6.9-5.3.4-8-4.8 0-9.6 0-14.4 0 0 2 0 3.9 0 5.9 2.8 0 5.6 0 8.3 0-.3 1.9-1.5 3.6-3.1 4.6-1 .7-2.2 1.1-3.4 1.3-1.2.2-2.5.2-3.7 0-1.2-.2-2.4-.7-3.4-1.4-1.6-1.1-2.9-2.8-3.5-4.6-.7-1.9-.7-4 0-5.8.5-1.3 1.2-2.5 2.2-3.5 1.2-1.2 2.8-2.1 4.6-2.5 1.5-.3 3-.2 4.5.2 1.2.4 2.4 1 3.3 1.9.9-.9 1.9-1.8 2.8-2.8.5-.5 1-1 1.5-1.5-1.4-1.3-3.1-2.3-4.9-3-3.3-1.2-7-1.2-10.3-.1z\"\r\n              ></path>\r\n              <path\r\n                fill=\"#EA4335\"\r\n                d=\"M15.3-4.2c3.3-1.1 7-1.1 10.3.1 1.8.7 3.5 1.7 4.9 3-.5.5-1 1-1.5 1.5-.9.9-1.9 1.8-2.8 2.8-.9-.9-2.1-1.5-3.3-1.9-1.4-.4-3-.5-4.5-.2-1.7.4-3.3 1.2-4.6 2.5-1 1-1.8 2.2-2.2 3.5-1.7-1.3-3.3-2.5-5-3.8 1.8-3.5 5-6.2 8.7-7.5z\"\r\n              ></path>\r\n              <path\r\n                fill=\"#FBBC05\"\r\n                d=\"M5.3 7c.3-1.3.7-2.6 1.3-3.7 1.7 1.3 3.3 2.5 5 3.8-.7 1.9-.7 4 0 5.8-1.7 1.3-3.3 2.5-5 3.8-1.5-2.9-2-6.4-1.3-9.7z\"\r\n              ></path>\r\n              <path\r\n                fill=\"#4285F4\"\r\n                d=\"M20.3 7.2c4.8 0 9.6 0 14.4 0 .5 2.6.4 5.4-.4 8-.7 2.4-2 4.6-3.9 6.2-1.6-1.2-3.2-2.5-4.9-3.7 1.6-1.1 2.7-2.8 3.1-4.6-2.8 0-5.6 0-8.3 0 0-2 0-4 0-5.9z\"\r\n              ></path>\r\n              <path\r\n                fill=\"#34A853\"\r\n                d=\"M6.6 16.7c1.7-1.3 3.3-2.5 5-3.8.6 1.8 1.9 3.5 3.5 4.6 1 .7 2.2 1.2 3.4 1.4 1.2.2 2.4.2 3.7 0 1.2-.2 2.4-.6 3.4-1.3 1.6 1.2 3.2 2.5 4.9 3.7-1.8 1.6-3.9 2.7-6.3 3.2-2.6.6-5.3.6-7.8-.1-2-.5-3.9-1.5-5.6-2.7-1.7-1.3-3.2-3-4.2-5z\"\r\n              ></path>\r\n            </svg>\r\n            Sign in with Google\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white dark:bg-coolDark-500 dark:text-white transition-colors\">\r\n      <header\r\n        className=\"flex-shrink-0 flex items-center justify-between px-4 sm:px-8 shadow-md\"\r\n        style={{ height: 'var(--topbar-height)' }}\r\n      >\r\n        <a href=\"https://alterclass.io/courses/react\">\r\n          <img src={brandLogo} alt=\"AlterClass\" width={150} />\r\n        </a>\r\n        <div className=\"flex items-center\">\r\n          {user ? (\r\n            <button\r\n              onClick={signOut}\r\n              className=\"uppercase text-sm font-medium text-primary-500 hover:text-white tracking-wide hover:bg-primary-500 bg-transparent rounded py-2 px-4 mr-4 focus:outline-none focus:ring focus:ring-primary-500 focus:ring-opacity-75 transition-all\"\r\n            >\r\n              Sign out\r\n            </button>\r\n          ) : null}\r\n          <ThemeIcon\r\n            className=\"h-8 w-8 cursor-pointer\"\r\n            onClick={() => setDarkMode(prev => !prev)}\r\n          />\r\n        </div>\r\n      </header>\r\n      <main\r\n        className=\"flex-1\"\r\n        style={{ maxHeight: 'calc(100% - var(--topbar-height))' }}\r\n      >\r\n        {renderContent()}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}